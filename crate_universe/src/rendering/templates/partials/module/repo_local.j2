    maybe(
        new_local_repository,
        name = "{{ crate_repository(name = crate.name, version = crate.version) }}",
    {%- if attrs | get(key="patch_args", default=Null) %}
        patch_args = [
    {%- for arg in attrs.patch_args %}
            "{{ arg }}",
    {%- endfor %}
        ],
    {%- endif %}
    {%- if attrs | get(key="patch_tool", default=Null) %}
        patch_tool = "{{ attrs.patch_tool }}",
    {%- endif %}
    {%- if attrs | get(key="patches", default=Null) %}
        patches = [
    {%- for patch in attrs.patches %}
            "{{ patch }}",
    {%- endfor %}
        ],
    {%- endif %}
        build_file = Label("{{ crate_build_file(name = crate.name, version = crate.version)}}"),
        path = "{{ vendor_path(name = crate.name, version = crate.version) }}",
    )
